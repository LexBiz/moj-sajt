## Что это

`мой нетифай` — мини‑аналог Netlify **для простых статических папок** (HTML/CSS/JS/картинки).

- Зашёл в админку
- Выбрал **папку проекта**
- Нажал **“Загрузить и опубликовать”**
- Получил ссылку вида **`/sites/<slug>/`** (и при желании **`https://<slug>.<домен>/`**)

## Как запустить локально (Windows / PowerShell)

1) Установи Node.js LTS (если ещё нет).

2) В папке проекта:

```powershell
npm install
$env:ADMIN_TOKEN="мой_секретный_токен"
npm start
```

Открой: `http://localhost:3000/admin/`

Также можно положить переменные в файл `.env` (он подхватывается автоматически).

## Переменные окружения

- **`PORT`**: порт (по умолчанию `3000`)
- **`DATA_DIR`**: где хранить сайты (по умолчанию `./data`)
- **`ADMIN_TOKEN`**: если задан — API/админка требуют Bearer‑токен
- **`ROOT_DOMAIN`**: если задан (например `example.com`) — включится режим поддоменов `https://<slug>.example.com/`
- **`ADMIN_HOSTNAMES`**: (опционально) хосты, где `/` должен открывать админку, даже если включён режим поддоменов.
  Пример: `deploy.example.com,admin.example.com`.

## Как выложить на VPS (очень кратко)

Минимально нужен **любой VPS** (1 CPU / 1 GB RAM) + **домен**.

Самый простой прокси — **Caddy** (он сам сделает HTTPS).
Важно: чтобы работали **неограниченные поддомены** (`client1.домен`, `client2.домен`, …) без ручной настройки,
лучше использовать **Caddy “on-demand TLS”** (сертификат на каждый поддомен выпускается автоматически при первом заходе).

### Что именно нужно, чтобы было “как Netlify”

- **VPS**: любой недорогой (хватит 1 vCPU / 1GB RAM).
- **Домен**: твой домен.
- **DNS записи**:
  - `A` запись для корня домена на IP VPS
  - `A` wildcard запись `*` на IP VPS (чтобы работали поддомены `client1.домен`)
- **Reverse proxy**: Caddy или Nginx (Caddy проще — сам выдаёт HTTPS).
- **ROOT_DOMAIN**: выставить переменную окружения (например `example.com`), тогда сайт будет доступен по `https://<slug>.example.com/`.
- (Рекомендуется) **ADMIN_HOSTNAMES**: выдели под админку отдельный поддомен, например `deploy.example.com`, чтобы:
  - `https://deploy.example.com/` → админка загрузки
  - `https://client1.example.com/` → сайт клиента

Файл с примером конфигурации: `Caddyfile.example` (on-demand TLS).

## Ограничения MVP

- Это **не билд‑система** (как Netlify build). Это публикация “как есть”.
- Для “выбрать папку” используется `webkitdirectory` (работает в Chrome/Edge).
- Удаление сайта есть, версионирования/откатов пока нет.


