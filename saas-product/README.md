## SaaS Product (TemoWeb) — концепт и структура

Эта папка — **документация и шаблоны** для масштабирования системы на десятки/сотни клиентов без “копировать проект и править руками”.

### Что Вы продаёте (Ваши пакеты)
Ваши пакеты **START / BUSINESS / PRO** — это **прайс для ваших клиентов** (которые покупают внедрение/сопровождение у TemoWeb).
Технически в системе это должно быть:
- **лимиты** (кол-во каналов, глубина CRM/аналитики)
- **фичи** (comments-replies, follow-up, analytics, integrations)
- **SLA/приоритет**

### Главная цель архитектуры
Один код (ядро) + много клиентов (**multi-tenant**):
- обновили ядро → обновилось у всех
- у каждого клиента свои каналы/токены/настройки/CRM-данные
- кастомизация делается **через конфиг**, а не через правку кода

### 5 путей связи (каналы)
1) Instagram Direct
2) Instagram Comments
3) WhatsApp
4) Telegram bot
5) Website chat / Flow
(Facebook Messenger — позже)

### Что обязательно будет “руками” (и это нормально)
Потому что внешние платформы требуют подтверждений/ролей:
- **Meta**: клиент заходит в Business Manager и выдаёт доступы/роли (2–3 шага)
- **WhatsApp**: привязка номера/Business аккаунта и подтверждения
- **Домены**: иногда подтверждение домена/вебхуков

Мы автоматизируем всё, что можно:
- OAuth-страницы “Подключить Instagram/WhatsApp”
- проверка вебхуков/подписок
- автосохранение токенов/ID
- тест-кнопки “Send test”, “Simulate comment”, “Check replies”

### Как это будет работать “в бою” (простая схема)
1) В канал приходит событие (DM/коммент/сообщение).
2) Адаптер канала приводит его к единому формату:
   - tenantId (какой клиент)
   - channel (какой канал)
   - userId (кто написал)
   - text/media/meta
3) Ядро:
   - подгружает настройки клиента (язык/пакет/фичи)
   - подгружает профиль бизнеса (ниша/оффер/FAQ/прайс)
   - подгружает историю диалога и стадию
   - генерирует ответ + валидирует/собирает лид
4) Адаптер отправляет ответ в нужный канал.
5) Лид фиксируется в CRM (строго по tenantId) + уходит уведомление.

### Что дальше (по чуть-чуть, без хаоса)
См.:
- `docs/01-onboarding.md` — пошагово: как подключаем клиента
- `docs/02-what-is-manual.md` — что делает клиент руками (Meta/WA)
- `docs/03-templates.md` — библиотека шаблонов/слоёв промпта и сценариев
- `docs/04-plans-and-features.md` — как ваши пакеты превращаются в фичи/лимиты


